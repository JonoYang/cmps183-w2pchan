{{left_sidebar_enabled,right_sidebar_enabled=False,('message' in globals())}}
{{extend 'layout.html'}}

<link rel="stylesheet" type="text/css" href="/w2pchan/static/css/thread.css">

<script type="text/javascript">
  $(document).ready(function(){
    $(".showpic").click(function(){
      var imgWidth = $(this).css("width");
      var imgHeight = $(this).css("height");
      if (imgWidth == "250px") {
        $(this).css("width", "75%");
      } else {
        $(this).css("width", "250px");
      }
    });
    $(".form").toggle();
    $(".toggle_form").click(function(){
      $(".form").toggle();
      $(".toggle_form").toggle();
    });
  });
</script>

<h2><a class="toggle_form">Reply</a></h2>
<div class = "form">{{=form}}</div>

{{=A('Return', _class = 'btn',
        _href = URL('board', 'index', args = [thread.board_id]))}}

<div class="op">
  <p>
    <strong>{{=thread.title}}</strong>
    {{if thread.author == '':}}
      {{=thread.author}}
    {{else:}}
      Anonymous
    {{pass}}
    {{=thread.date_created}}
    {{=A('Delete', _href = URL('thread', 'delete', args = [thread.id]))}}
  </p>
  <p>
    {{if thread.image:}}
      <img class = "showpic" src="{{=URL('default', 'download', args=thread.image)}}" width = "250"/>
    {{pass}}
    {{=thread.body}}
  </p>
</div>

{{if len(posts) > 0:}}
  {{for p in reversed(posts):}}
    {{if p.author == '':}}

      <div class="post">
        <p>
          Anonymous
          {{=p.date_created}} 
          {{=A('Delete', _href = URL('post', 'delete', args = [p.id]))}}
        </p>
        <p>
          {{if p.image:}}
            <img class="showpic" src="{{=URL('default', 'download', args=p.image)}}" width="250"/>
          {{pass}}
          {{=p.body}}
        </p>
      </div>

    {{else:}}

      <div class="post">
        <p>
          {{=p.author}}
          {{=p.date_created}}
          {{=A('Delete', _href = URL('post', 'delete', args = [p.id]))}}
        </p>
        <p>  
          {{if p.image:}}
            <img class="showpic" src="{{=URL('default', 'download', args=p.image)}}" width = "250"/>
          {{pass}}
          {{=p.body}}
        </p>
      </div>

    {{pass}}

    <br>

  {{pass}}
{{else:}}

  <p>There are no posts in this thread</p>

{{pass}}

{{=A('Return', _class = 'btn',
        _href = URL('board', 'index', args = [thread.board_id]))}}