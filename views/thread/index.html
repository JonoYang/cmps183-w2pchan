{{left_sidebar_enabled,right_sidebar_enabled=False,('message' in globals())}}
{{response.title=board_name}}
{{extend 'layout.html'}}

<link rel="stylesheet" type="text/css" href="/w2pchan/static/css/thread.css">

<script type="text/javascript">
  $(document).ready(function(){
    $(".oppic").click(function(){
      var imgWidth = $(this).css("width");
      var imgHeight = $(this).css("height");
      if (imgWidth == "250px") {
        $(this).css("width", "75%");
        $(this).removeAttr("align");            
      } else {
        $(this).css("width", "250px");
        $(this).attr("align", "left");   
      }
    });

    $(".showpic").click(function(){
      var imgWidth = $(this).css("width");
      var imgHeight = $(this).css("height");
      if (imgWidth == "125px") {
        $(this).css("width", "75%");
        $(this).removeAttr("align");            
      } else {
        $(this).css("width", "125px");
        $(this).attr("align", "left");   
      }
    });

    $(".form").toggle();
    $(".toggle_form").click(function(){
      $(".form").toggle();
      $(".toggle_form").toggle();
    });
  });
</script>

<a class="toggle_form"><h3 style="text-align: center">[Post a Reply]</h3></a>
<div class = "form">{{=form}}</div>

{{=A('[Return]', _href = URL('board', 'index', args = [thread.board_id]))}}
<br>
<br>
<div class="op">
  <p>
    <strong>{{=thread.title}}</strong>
    {{if thread.author == '':}}
      {{=thread.author}}
    {{else:}}
      Anonymous
    {{pass}}
    {{=thread.date_created}}
    {{=A('Delete', _href = URL('thread', 'delete', args = [thread.id]))}}
  </p>
  <p>
    {{if thread.image:}}
      <img class = "oppic" src="{{=URL('default', 'download', args=thread.image)}}" width = "250" align="left"/>
    {{pass}}

    {{=thread.body}}

  </p>
</div>

{{if len(posts) > 0:}}
  {{for p in reversed(posts):}}
    {{if p.author == '':}}

      <div class="post">
        <p>
          Anonymous
          {{=p.date_created}} 
          {{=A('Delete', _href = URL('post', 'delete', args = [p.id]))}}
        </p>
          {{if p.image:}}
            <img class="showpic" src="{{=URL('default', 'download', args=p.image)}}" width="125" align="left"/>
          {{pass}}
          <p class="postbod">
            {{=p.body}}
          <p>
      </div>

    {{else:}}

      <div class="post">
        <p>
          {{=p.author}}
          {{=p.date_created}}
          {{=A('Delete', _href = URL('post', 'delete', args = [p.id]))}}
        </p>
        <p>  
          {{if p.image:}}
            <img class="showpic" src="{{=URL('default', 'download', args=p.image)}}" width = "125" align="left"/>
          {{pass}}
          <div class="postbod">
          {{=p.body}}
          </div>
        </p>
      </div>

    {{pass}}

    <br>

  {{pass}}
{{pass}}
<br>
<a href="{{=URL('board', 'index', args = [thread.board_id])}}" style = "clear: both;">[Return]</a>
